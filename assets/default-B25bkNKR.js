import{p as D,m as te,a as ae,g as $,u as W,c as l,b as ie,d as ce,e as de,f as ve,h as fe,t as q,i as me,j as ge,k as he,l as be,n as le,s as _,o as V,q as ye,V as xe,r as K,v as R,w as ke,x as Y,y as Ve,z as L,A as Se,B as oe,C as Te,D as ne,E as we,F as Ee,G as p,H as Ce,I as _e,J as pe,K as Be,L as Pe,M as Ae,N as Ie,O as G,P as He,Q as Le,R as De,S as Re,T as J,U as Q,W as Ne,X,Y as Me,Z as j,_ as Ue,$ as Fe,a0 as Oe,a1 as ze,a2 as w,a3 as B,a4 as c,a5 as P,a6 as E,a7 as A,a8 as N,a9 as Ke,aa as M,ab as I,ac as U,ad as H,ae as Z,af as $e,ag as We}from"./index-DLbUNHb9.js";import{V as je}from"./VContainer-B5SQmn9o.js";import{V as F}from"./VList-CWKH33KG.js";import{u as qe}from"./ssrBoot-CHWxfnpe.js";import{V as Ye}from"./VMain-vOCm5I7h.js";import{V as O}from"./VListItem-DpV7PDbG.js";import"./VDivider-x1LuGNcv.js";const Ge=D({text:String,...te(),...ae()},"VToolbarTitle"),Je=$()({name:"VToolbarTitle",props:Ge(),setup(e,k){let{slots:t}=k;return W(()=>{const u=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var g;return[u&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(g=t.default)==null?void 0:g.call(t)])]}})}),{}}}),Qe=[null,"prominent","default","comfortable","compact"],se=D({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Qe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ie(),...te(),...ce(),...de(),...ae({tag:"header"}),...ve()},"VToolbar"),ee=$()({name:"VToolbar",props:se(),setup(e,k){var b;let{slots:t}=k;const{backgroundColorClasses:u,backgroundColorStyles:g}=fe(q(e,"color")),{borderClasses:n}=me(e),{elevationClasses:y}=ge(e),{roundedClasses:h}=he(e),{themeClasses:d}=be(e),{rtlClasses:i}=le(),r=_(!!(e.extended||(b=t.extension)!=null&&b.call(t))),x=V(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),s=V(()=>r.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ye({VBtn:{variant:"text"}}),W(()=>{var v;const f=!!(e.title||t.title),T=!!(t.image||e.image),a=(v=t.extension)==null?void 0:v.call(t);return r.value=!!(e.extended||a),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},u.value,n.value,y.value,h.value,d.value,i.value,e.class],style:[g.value,e.style]},{default:()=>[T&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(K,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(xe,{key:"image-img",cover:!0,src:e.image},null)]),l(K,{defaults:{VTabs:{height:R(x.value)}}},{default:()=>{var o,m,S;return[l("div",{class:"v-toolbar__content",style:{height:R(x.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(o=t.prepend)==null?void 0:o.call(t)]),f&&l(Je,{key:"title",text:e.title},{text:t.title}),(m=t.default)==null?void 0:m.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(S=t.append)==null?void 0:S.call(t)])])]}}),l(K,{defaults:{VTabs:{height:R(s.value)}}},{default:()=>[l(ke,null,{default:()=>[r.value&&l("div",{class:"v-toolbar__extension",style:{height:R(s.value)}},[a])]})]})]})}),{contentHeight:x,extensionHeight:s}}}),Xe=D({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ze(e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=k;let u=0,g=0;const n=Y(null),y=_(0),h=_(0),d=_(0),i=_(!1),r=_(!1),x=V(()=>Number(e.scrollThreshold)),s=V(()=>Ve((x.value-y.value)/x.value||0)),b=()=>{const f=n.value;if(!f||t&&!t.value)return;u=y.value,y.value="window"in f?f.pageYOffset:f.scrollTop;const T=f instanceof Window?document.documentElement.scrollHeight:f.scrollHeight;if(g!==T){g=T;return}r.value=y.value<u,d.value=Math.abs(y.value-x.value)};return L(r,()=>{h.value=h.value||y.value}),L(i,()=>{h.value=0}),Se(()=>{L(()=>e.scrollTarget,f=>{var a;const T=f?document.querySelector(f):window;T&&T!==n.value&&((a=n.value)==null||a.removeEventListener("scroll",b),n.value=T,n.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),oe(()=>{var f;(f=n.value)==null||f.removeEventListener("scroll",b)}),t&&L(t,b,{immediate:!0}),{scrollThreshold:x,currentScroll:y,currentThreshold:d,isScrollActive:i,scrollRatio:s,isScrollingUp:r,savedScroll:h}}const et=D({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...se(),...Te(),...Xe(),height:{type:[Number,String],default:64}},"VAppBar"),tt=$()({name:"VAppBar",props:et(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const u=Y(),g=ne(e,"modelValue"),n=V(()=>{var m;const o=new Set(((m=e.scrollBehavior)==null?void 0:m.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),y=V(()=>{const o=n.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!g.value}),{currentScroll:h,scrollThreshold:d,isScrollingUp:i,scrollRatio:r}=Ze(e,{canScroll:y}),x=V(()=>n.value.hide||n.value.fullyHide),s=V(()=>e.collapse||n.value.collapse&&(n.value.inverted?r.value>0:r.value===0)),b=V(()=>e.flat||n.value.fullyHide&&!g.value||n.value.elevate&&(n.value.inverted?h.value>0:h.value===0)),f=V(()=>n.value.fadeImage?n.value.inverted?1-r.value:r.value:void 0),T=V(()=>{var S,C;if(n.value.hide&&n.value.inverted)return 0;const o=((S=u.value)==null?void 0:S.contentHeight)??0,m=((C=u.value)==null?void 0:C.extensionHeight)??0;return x.value?h.value<d.value||n.value.fullyHide?o+m:o:o+m});we(V(()=>!!e.scrollBehavior),()=>{Ce(()=>{x.value?n.value.inverted?g.value=h.value>d.value:g.value=i.value||h.value<d.value:g.value=!0})});const{ssrBootStyles:a}=qe(),{layoutItemStyles:v}=Ee({id:e.name,order:V(()=>parseInt(e.order,10)),position:q(e,"location"),layoutSize:T,elementSize:_(void 0),active:g,absolute:q(e,"absolute")});return W(()=>{const o=ee.filterProps(e);return l(ee,p({ref:u,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...v.value,"--v-toolbar-image-opacity":f.value,height:void 0,...a.value},e.style]},o,{collapse:s.value,flat:b.value}),t)}),{}}}),at=D({id:String,submenu:Boolean,..._e(pe({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Be}}),["absolute"])},"VMenu"),z=$()({name:"VMenu",props:at(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const u=ne(e,"modelValue"),{scopeId:g}=Pe(),{isRtl:n}=le(),y=Ae(),h=V(()=>e.id||`v-menu-${y}`),d=Y(),i=Ie(G,null),r=_(new Set);He(G,{register(){r.value.add(y)},unregister(){r.value.delete(y)},closeParents(a){setTimeout(()=>{var v;!r.value.size&&!e.persistent&&(a==null||(v=d.value)!=null&&v.contentEl&&!Le(a,d.value.contentEl))&&(u.value=!1,i==null||i.closeParents())},40)}}),oe(()=>{i==null||i.unregister(),document.removeEventListener("focusin",x)}),De(()=>u.value=!1);async function x(a){var m,S,C;const v=a.relatedTarget,o=a.target;await Re(),u.value&&v!==o&&((m=d.value)!=null&&m.contentEl)&&((S=d.value)!=null&&S.globalTop)&&![document,d.value.contentEl].includes(o)&&!d.value.contentEl.contains(o)&&((C=J(d.value.contentEl)[0])==null||C.focus())}L(u,a=>{a?(i==null||i.register(),X&&document.addEventListener("focusin",x,{once:!0})):(i==null||i.unregister(),X&&document.removeEventListener("focusin",x))},{immediate:!0});function s(a){i==null||i.closeParents(a)}function b(a){var v,o,m,S,C;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),Me(J((v=d.value)==null?void 0:v.contentEl,!1),a.shiftKey?"prev":"next",ue=>ue.tabIndex>=0)||(u.value=!1,(m=(o=d.value)==null?void 0:o.activatorEl)==null||m.focus())}else e.submenu&&a.key===(n.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(C=(S=d.value)==null?void 0:S.activatorEl)==null||C.focus())}function f(a){var o;if(e.disabled)return;const v=(o=d.value)==null?void 0:o.contentEl;v&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),j(v,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),j(v,"prev")):e.submenu&&(a.key===(n.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(n.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),j(v,"first"))):(e.submenu?a.key===(n.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>f(a))))}const T=V(()=>p({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-controls":h.value,onKeydown:f},e.activatorProps));return W(()=>{const a=Q.filterProps(e);return l(Q,p({ref:d,id:h.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":v=>u.value=v,absolute:!0,activatorProps:T.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":s,onKeydown:b},g),{activator:t.activator,default:function(){for(var v=arguments.length,o=new Array(v),m=0;m<v;m++)o[m]=arguments[m];return l(K,{root:"VMenu"},{default:()=>{var S;return[(S=t.default)==null?void 0:S.call(t,...o)]}})}})}),Ne({id:h,ΨopenChildren:r},d)}}),ct={__name:"default",setup(e){const k=Ue(),{apiAuth:t}=We(),u=Fe(),g=Oe(),n=[{text:"開始",to:"/rulebook#start",children:[{text:"AAAA",to:"/rulebook#start-aaaa"},{text:"BBBB",to:"/rulebook#start-bbbb"}]},{text:"玩家",to:"/rulebook#player",children:[{text:"CCCC",to:"/rulebook#player-cccc"},{text:"DDDD",to:"/rulebook#player-dddd"}]},{text:"主持人",to:"/rulebook#host",children:[{text:"EEEE",to:"/rulebook#host-eeee"},{text:"FFFF",to:"/rulebook#host-ffff"}]}],y=[{to:"/data",text:"你好"},{to:"/data",text:"不好"}],h=[{to:"/charalist",text:"角色列表"},{to:"/charasheetNew",text:"創建角色"},{to:"/schedule",text:"日程表"},{text:"登出"}],d=async()=>{try{await t.delete("/user/logout")}catch(i){console.log(i)}k.logout(),u({text:"登出成功",snackbarProps:{color:"green"}}),g.push("/")};return(i,r)=>{const x=ze("router-view");return w(),B(A,null,[l(tt,null,{default:c(()=>[l(je,{fluid:"",class:"d-flex align-center"},{default:c(()=>[l(P,{to:"/",active:!1,class:"text-h5"},{default:c(()=>r[0]||(r[0]=[E("調查員之家")])),_:1}),l(z,{"open-on-hover":""},{activator:c(({props:s})=>[l(P,p({to:"/rulebook"},s),{default:c(()=>r[1]||(r[1]=[E("規則書")])),_:2},1040)]),default:c(()=>[l(F,null,{default:c(()=>[(w(),B(A,null,N(n,s=>(w(),B(A,{key:s.text},[s.children?(w(),I(z,{key:0,"open-on-hover":"",location:"end"},{activator:c(({props:b})=>[l(O,p({ref_for:!0},b,{to:s.to}),{default:c(()=>[E(H(s.text),1),l(Z,{icon:"mdi-menu-right",size:"x-small"})]),_:2},1040,["to"])]),default:c(()=>[l(F,null,{default:c(()=>[(w(!0),B(A,null,N(s.children,b=>(w(),I(O,{key:b.text,to:b.to},{default:c(()=>[E(H(b.text),1)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1024)):U("",!0)],64))),64))]),_:1})]),_:1}),l(z,{"open-on-hover":""},{activator:c(({props:s})=>[l(P,p({to:"/data"},s),{default:c(()=>r[2]||(r[2]=[E("關於調查員")])),_:2},1040)]),default:c(()=>[l(F,null,{default:c(()=>[(w(),B(A,null,N(y,s=>l(O,{key:s.value,to:s.to},{default:c(()=>[E(H(s.text),1)]),_:2},1032,["to"])),64))]),_:1})]),_:1}),l(Ke),M(k).isLoggedIn?U("",!0):(w(),I(P,{key:0,to:"/register",active:!1},{default:c(()=>r[3]||(r[3]=[E("註冊")])),_:1})),M(k).isLoggedIn?U("",!0):(w(),I(P,{key:1,to:"/login",active:!1},{default:c(()=>r[4]||(r[4]=[E("登入")])),_:1})),l(z,{"open-on-hover":""},{activator:c(({props:s})=>[M(k).isLoggedIn?(w(),I(P,$e(p({key:0},s)),{default:c(()=>[E(H(M(k).account),1),l(Z,{icon:"mdi-menu-down"})]),_:2},1040)):U("",!0)]),default:c(()=>[l(F,null,{default:c(()=>[(w(),B(A,null,N(h,s=>l(O,{key:s.value,to:s.to,onClick:b=>s.text==="登出"?d():null},{default:c(()=>[E(H(s.text),1)]),_:2},1032,["to","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ye,null,{default:c(()=>[l(x)]),_:1})],64)}}};export{ct as default};
