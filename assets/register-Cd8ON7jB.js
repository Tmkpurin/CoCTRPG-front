import{ah as M,$ as _,a3 as A,c as s,a4 as r,a5 as g,a7 as B,ag as U,a0 as $,a2 as q,a6 as v,al as x,aa as a,aA as E,ay as n}from"./index-BIOJ7wy9.js";import{c as N,a as i,e as j,u as z,d as u,V as P}from"./index.esm-EU4o9Pf6.js";import{v as b}from"./index-BcGGyUu-.js";import{b as w}from"./route-block-B_A1xBdJ.js";import{V as R}from"./VContainer-BzB05Dvr.js";import{V as T,a as D}from"./VRow-DUv8sevy.js";import{V as I}from"./VDivider-B64AXrpT.js";const O={class:"text-center"},y={__name:"register",setup(G){const{api:h}=U(),f=_(),k=$(),C=N({account:i().required("使用者帳號必填").min(4,"使用者帳號太短").max(20,"使用者帳號太長").test("isAlphanumeric","使用者帳號格式不符",o=>b.isAlphanumeric(o)),email:i().required("使用者信箱必填").test("isEmail","使用者信箱格式不符",o=>b.isEmail(o)),password:i().required("使用者密碼必填").min(4,"使用者密碼太短").max(20,"使用者密碼太長"),passwordConfirm:i().oneOf([j("password")],"密碼不符")}),{handleSubmit:S,isSubmitting:V}=z({validationSchema:C}),m=u("account"),d=u("email"),p=u("password"),c=u("passwordConfirm"),F=S(async o=>{var e,t;try{await h.post("/user",{account:o.account,email:o.email,password:o.password}),f({text:"註冊成功",snackbarProps:{color:"green"}}),k.push("/login")}catch(l){console.log(l),f({text:((t=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:t.message)||"發生未知錯誤",snackbarProps:{color:"red"}})}});return(o,e)=>(q(),A(B,null,[s(g,{to:"/",elevation:"0",variant:"text",size:"small",class:"home-btn"},{default:r(()=>e[4]||(e[4]=[v("回首頁")])),_:1}),s(R,{class:"d-flex align-center justify-center",style:{"min-height":"100vh"}},{default:r(()=>[s(T,{justify:"center",align:"center",class:"w-100"},{default:r(()=>[s(D,{cols:"12",sm:"8",md:"6",lg:"4"},{default:r(()=>[e[7]||(e[7]=x("h1",{class:"text-center"},"註冊",-1)),s(I),s(P,{disabled:a(V),onSubmit:E(a(F),["prevent"])},{default:r(()=>[s(n,{modelValue:a(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a(m).value.value=t),"error-messages":a(m).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",variant:"outlined",counter:""},null,8,["modelValue","error-messages"]),s(n,{modelValue:a(d).value.value,"onUpdate:modelValue":e[1]||(e[1]=t=>a(d).value.value=t),"error-messages":a(d).errorMessage.value,label:"信箱",variant:"outlined"},null,8,["modelValue","error-messages"]),s(n,{modelValue:a(p).value.value,"onUpdate:modelValue":e[2]||(e[2]=t=>a(p).value.value=t),type:"password","error-messages":a(p).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",variant:"outlined",counter:""},null,8,["modelValue","error-messages"]),s(n,{modelValue:a(c).value.value,"onUpdate:modelValue":e[3]||(e[3]=t=>a(c).value.value=t),type:"password","error-messages":a(c).errorMessage.value,label:"確認密碼",minlength:"4",maxlength:"20",variant:"outlined",counter:""},null,8,["modelValue","error-messages"]),x("div",O,[s(g,{loading:a(V),type:"submit",color:"primary"},{default:r(()=>e[5]||(e[5]=[v("建立帳號")])),_:1},8,["loading"]),s(g,{to:"/login",elevation:"0",variant:"text",size:"small"},{default:r(()=>e[6]||(e[6]=[v("有帳號了嗎？")])),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})],64))}};typeof w=="function"&&w(y);const Y=M(y,[["__scopeId","data-v-41d65aa5"]]);export{Y as default};
