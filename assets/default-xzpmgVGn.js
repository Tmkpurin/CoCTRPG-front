import{p as R,m as te,a as ae,g as $,u as W,c as l,b as ie,d as ce,e as de,f as ve,h as fe,t as q,i as me,j as ge,k as he,l as ye,n as le,s as _,o as V,q as be,V as xe,r as F,v as D,w as ke,x as G,y as Ve,z as L,A as Se,B as oe,C as Te,D as ne,E as we,F as pe,G as P,H as Ee,I as _e,J as Pe,K as Ce,L as Be,M as Ie,N as Ae,O as Y,P as He,Q as Le,R as Re,S as De,T as J,U as Q,W as Ne,X,Y as Me,Z as j,_ as Ue,$ as Oe,a0 as ze,a1 as Ke,a2 as w,a3 as C,a4 as c,a5 as B,a6 as p,a7 as I,a8 as N,a9 as Fe,aa as M,ab as A,ac as U,ad as H,ae as Z,af as $e,ag as We}from"./index-DeXAYLHc.js";import{V as je}from"./VContainer-EvF75JMY.js";import{V as O}from"./VList-CbggPzD3.js";import{u as qe}from"./ssrBoot-CyAyNlDJ.js";import{V as Ge}from"./VMain-C55GFMZw.js";import{V as z}from"./VListItem-CvensomN.js";import"./VDivider-C5pOcy1R.js";const Ye=R({text:String,...te(),...ae()},"VToolbarTitle"),Je=$()({name:"VToolbarTitle",props:Ye(),setup(e,k){let{slots:t}=k;return W(()=>{const u=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var g;return[u&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(g=t.default)==null?void 0:g.call(t)])]}})}),{}}}),Qe=[null,"prominent","default","comfortable","compact"],se=R({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Qe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ie(),...te(),...ce(),...de(),...ae({tag:"header"}),...ve()},"VToolbar"),ee=$()({name:"VToolbar",props:se(),setup(e,k){var y;let{slots:t}=k;const{backgroundColorClasses:u,backgroundColorStyles:g}=fe(q(e,"color")),{borderClasses:n}=me(e),{elevationClasses:b}=ge(e),{roundedClasses:h}=he(e),{themeClasses:d}=ye(e),{rtlClasses:i}=le(),r=_(!!(e.extended||(y=t.extension)!=null&&y.call(t))),x=V(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),s=V(()=>r.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return be({VBtn:{variant:"text"}}),W(()=>{var v;const f=!!(e.title||t.title),T=!!(t.image||e.image),a=(v=t.extension)==null?void 0:v.call(t);return r.value=!!(e.extended||a),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},u.value,n.value,b.value,h.value,d.value,i.value,e.class],style:[g.value,e.style]},{default:()=>[T&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(F,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(xe,{key:"image-img",cover:!0,src:e.image},null)]),l(F,{defaults:{VTabs:{height:D(x.value)}}},{default:()=>{var o,m,S;return[l("div",{class:"v-toolbar__content",style:{height:D(x.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(o=t.prepend)==null?void 0:o.call(t)]),f&&l(Je,{key:"title",text:e.title},{text:t.title}),(m=t.default)==null?void 0:m.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(S=t.append)==null?void 0:S.call(t)])])]}}),l(F,{defaults:{VTabs:{height:D(s.value)}}},{default:()=>[l(ke,null,{default:()=>[r.value&&l("div",{class:"v-toolbar__extension",style:{height:D(s.value)}},[a])]})]})]})}),{contentHeight:x,extensionHeight:s}}}),Xe=R({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ze(e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=k;let u=0,g=0;const n=G(null),b=_(0),h=_(0),d=_(0),i=_(!1),r=_(!1),x=V(()=>Number(e.scrollThreshold)),s=V(()=>Ve((x.value-b.value)/x.value||0)),y=()=>{const f=n.value;if(!f||t&&!t.value)return;u=b.value,b.value="window"in f?f.pageYOffset:f.scrollTop;const T=f instanceof Window?document.documentElement.scrollHeight:f.scrollHeight;if(g!==T){g=T;return}r.value=b.value<u,d.value=Math.abs(b.value-x.value)};return L(r,()=>{h.value=h.value||b.value}),L(i,()=>{h.value=0}),Se(()=>{L(()=>e.scrollTarget,f=>{var a;const T=f?document.querySelector(f):window;T&&T!==n.value&&((a=n.value)==null||a.removeEventListener("scroll",y),n.value=T,n.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),oe(()=>{var f;(f=n.value)==null||f.removeEventListener("scroll",y)}),t&&L(t,y,{immediate:!0}),{scrollThreshold:x,currentScroll:b,currentThreshold:d,isScrollActive:i,scrollRatio:s,isScrollingUp:r,savedScroll:h}}const et=R({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...se(),...Te(),...Xe(),height:{type:[Number,String],default:64}},"VAppBar"),tt=$()({name:"VAppBar",props:et(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const u=G(),g=ne(e,"modelValue"),n=V(()=>{var m;const o=new Set(((m=e.scrollBehavior)==null?void 0:m.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),b=V(()=>{const o=n.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!g.value}),{currentScroll:h,scrollThreshold:d,isScrollingUp:i,scrollRatio:r}=Ze(e,{canScroll:b}),x=V(()=>n.value.hide||n.value.fullyHide),s=V(()=>e.collapse||n.value.collapse&&(n.value.inverted?r.value>0:r.value===0)),y=V(()=>e.flat||n.value.fullyHide&&!g.value||n.value.elevate&&(n.value.inverted?h.value>0:h.value===0)),f=V(()=>n.value.fadeImage?n.value.inverted?1-r.value:r.value:void 0),T=V(()=>{var S,E;if(n.value.hide&&n.value.inverted)return 0;const o=((S=u.value)==null?void 0:S.contentHeight)??0,m=((E=u.value)==null?void 0:E.extensionHeight)??0;return x.value?h.value<d.value||n.value.fullyHide?o+m:o:o+m});we(V(()=>!!e.scrollBehavior),()=>{Ee(()=>{x.value?n.value.inverted?g.value=h.value>d.value:g.value=i.value||h.value<d.value:g.value=!0})});const{ssrBootStyles:a}=qe(),{layoutItemStyles:v}=pe({id:e.name,order:V(()=>parseInt(e.order,10)),position:q(e,"location"),layoutSize:T,elementSize:_(void 0),active:g,absolute:q(e,"absolute")});return W(()=>{const o=ee.filterProps(e);return l(ee,P({ref:u,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...v.value,"--v-toolbar-image-opacity":f.value,height:void 0,...a.value},e.style]},o,{collapse:s.value,flat:y.value}),t)}),{}}}),at=R({id:String,submenu:Boolean,..._e(Pe({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ce}}),["absolute"])},"VMenu"),K=$()({name:"VMenu",props:at(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const u=ne(e,"modelValue"),{scopeId:g}=Be(),{isRtl:n}=le(),b=Ie(),h=V(()=>e.id||`v-menu-${b}`),d=G(),i=Ae(Y,null),r=_(new Set);He(Y,{register(){r.value.add(b)},unregister(){r.value.delete(b)},closeParents(a){setTimeout(()=>{var v;!r.value.size&&!e.persistent&&(a==null||(v=d.value)!=null&&v.contentEl&&!Le(a,d.value.contentEl))&&(u.value=!1,i==null||i.closeParents())},40)}}),oe(()=>{i==null||i.unregister(),document.removeEventListener("focusin",x)}),Re(()=>u.value=!1);async function x(a){var m,S,E;const v=a.relatedTarget,o=a.target;await De(),u.value&&v!==o&&((m=d.value)!=null&&m.contentEl)&&((S=d.value)!=null&&S.globalTop)&&![document,d.value.contentEl].includes(o)&&!d.value.contentEl.contains(o)&&((E=J(d.value.contentEl)[0])==null||E.focus())}L(u,a=>{a?(i==null||i.register(),X&&document.addEventListener("focusin",x,{once:!0})):(i==null||i.unregister(),X&&document.removeEventListener("focusin",x))},{immediate:!0});function s(a){i==null||i.closeParents(a)}function y(a){var v,o,m,S,E;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),Me(J((v=d.value)==null?void 0:v.contentEl,!1),a.shiftKey?"prev":"next",ue=>ue.tabIndex>=0)||(u.value=!1,(m=(o=d.value)==null?void 0:o.activatorEl)==null||m.focus())}else e.submenu&&a.key===(n.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(E=(S=d.value)==null?void 0:S.activatorEl)==null||E.focus())}function f(a){var o;if(e.disabled)return;const v=(o=d.value)==null?void 0:o.contentEl;v&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),j(v,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),j(v,"prev")):e.submenu&&(a.key===(n.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(n.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),j(v,"first"))):(e.submenu?a.key===(n.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>f(a))))}const T=V(()=>P({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-controls":h.value,onKeydown:f},e.activatorProps));return W(()=>{const a=Q.filterProps(e);return l(Q,P({ref:d,id:h.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":v=>u.value=v,absolute:!0,activatorProps:T.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":s,onKeydown:y},g),{activator:t.activator,default:function(){for(var v=arguments.length,o=new Array(v),m=0;m<v;m++)o[m]=arguments[m];return l(F,{root:"VMenu"},{default:()=>{var S;return[(S=t.default)==null?void 0:S.call(t,...o)]}})}})}),Ne({id:h,ΨopenChildren:r},d)}}),ct={__name:"default",setup(e){const k=Ue(),{apiAuth:t}=We(),u=Oe(),g=ze(),n=[{text:"遊戲系統",to:"/rulebook#start",children:[{text:"桌上角色扮演遊戲",to:"/rulebook#start-aaaa"}]},{text:"導言",to:"/rulebook#player",children:[{text:"何謂克蘇魯神話",to:"/rulebook#player-cccc"},{text:"何謂TRPG",to:"/rulebook#player-dddd"},{text:"遊玩的目的",to:"/rulebook#player-dddd"},{text:"守秘人",to:"/rulebook#player-dddd"},{text:"玩家",to:"/rulebook#player-dddd"},{text:"玩家之間的合作",to:"/rulebook#player-dddd"},{text:"遊戲的背景世界",to:"/rulebook#player-dddd"}]}],b=[{to:"/data",text:"你好"},{to:"/data",text:"不好"}],h=[{to:"/charalist",text:"角色列表"},{to:"/charasheetNew",text:"創建角色"},{to:"/schedule",text:"日程表"},{text:"登出"}],d=async()=>{try{await t.delete("/user/logout")}catch(i){console.log(i)}k.logout(),u({text:"登出成功",snackbarProps:{color:"green"}}),g.push("/")};return(i,r)=>{const x=Ke("router-view");return w(),C(I,null,[l(tt,null,{default:c(()=>[l(je,{fluid:"",class:"d-flex align-center"},{default:c(()=>[l(B,{to:"/",active:!1,class:"text-h5"},{default:c(()=>r[0]||(r[0]=[p("調查員之家")])),_:1}),l(K,{"open-on-hover":""},{activator:c(({props:s})=>[l(B,P({to:"/rulebook"},s),{default:c(()=>r[1]||(r[1]=[p("規則書")])),_:2},1040)]),default:c(()=>[l(O,null,{default:c(()=>[(w(),C(I,null,N(n,s=>(w(),C(I,{key:s.text},[s.children?(w(),A(K,{key:0,"open-on-hover":"",location:"end"},{activator:c(({props:y})=>[l(z,P({ref_for:!0},y,{to:s.to}),{default:c(()=>[p(H(s.text),1),l(Z,{icon:"mdi-menu-right",size:"x-small"})]),_:2},1040,["to"])]),default:c(()=>[l(O,null,{default:c(()=>[(w(!0),C(I,null,N(s.children,y=>(w(),A(z,{key:y.text,to:y.to},{default:c(()=>[p(H(y.text),1)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1024)):U("",!0)],64))),64))]),_:1})]),_:1}),l(K,{"open-on-hover":""},{activator:c(({props:s})=>[l(B,P({to:"/data"},s),{default:c(()=>r[2]||(r[2]=[p("關於調查員")])),_:2},1040)]),default:c(()=>[l(O,null,{default:c(()=>[(w(),C(I,null,N(b,s=>l(z,{key:s.value,to:s.to},{default:c(()=>[p(H(s.text),1)]),_:2},1032,["to"])),64))]),_:1})]),_:1}),l(Fe),M(k).isLoggedIn?U("",!0):(w(),A(B,{key:0,to:"/register",active:!1},{default:c(()=>r[3]||(r[3]=[p("註冊")])),_:1})),M(k).isLoggedIn?U("",!0):(w(),A(B,{key:1,to:"/login",active:!1},{default:c(()=>r[4]||(r[4]=[p("登入")])),_:1})),l(K,{"open-on-hover":""},{activator:c(({props:s})=>[M(k).isLoggedIn?(w(),A(B,$e(P({key:0},s)),{default:c(()=>[p(H(M(k).account),1),l(Z,{icon:"mdi-menu-down"})]),_:2},1040)):U("",!0)]),default:c(()=>[l(O,null,{default:c(()=>[(w(),C(I,null,N(h,s=>l(z,{key:s.value,to:s.to,onClick:y=>s.text==="登出"?d():null},{default:c(()=>[p(H(s.text),1)]),_:2},1032,["to","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ge,null,{default:c(()=>[l(x)]),_:1})],64)}}};export{ct as default};
