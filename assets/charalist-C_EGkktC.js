import{x as F,al as Y,p as Z,am as R,b as ee,m as ae,an as te,d as le,e as ne,ao as ie,a as se,f as ue,ap as re,g as oe,D as ce,aq as de,n as ve,l as fe,ar as ge,s as me,q,as as be,o as V,at as B,t as p,u as ye,c as t,a5 as C,G as P,au as G,S as U,ah as _e,a1 as Ve,a2 as x,ab as A,a4 as s,a6 as w,ad as $,ac as he,av as pe,V as xe,ae as Le,aw as ke,a3 as Pe,a8 as Ae,a7 as Ie,ag as Se}from"./index-DLbUNHb9.js";import{V as Ce,a as M,b as we}from"./VListItem-DpV7PDbG.js";import{V as W}from"./VContainer-B5SQmn9o.js";import{V as T,a as L}from"./VRow-BGoYdfwg.js";import{b as K}from"./route-block-B_A1xBdJ.js";function Re(){const e=F([]);Y(()=>e.value=[]);function h(i,o){e.value[o]=i}return{refs:e,updateRef:h}}const Be=Z({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:R,default:"$first"},prevIcon:{type:R,default:"$prev"},nextIcon:{type:R,default:"$next"},lastIcon:{type:R,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ee(),...ae(),...te(),...le(),...ne(),...ie(),...se({tag:"nav"}),...ue(),...re({variant:"text"})},"VPagination"),$e=oe()({name:"VPagination",props:Be(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,h){let{slots:i,emit:o}=h;const l=ce(e,"modelValue"),{t:y,n:D}=de(),{isRtl:k}=ve(),{themeClasses:m}=fe(e),{width:f}=ge(),r=me(-1);q(void 0,{scoped:!0});const{resizeRef:O}=be(a=>{if(!a.length)return;const{target:n,contentRect:u}=a[0],v=n.querySelector(".v-pagination__list > *");if(!v)return;const g=u.width,S=v.offsetWidth+parseFloat(getComputedStyle(v).marginRight)*2;r.value=E(g,S)}),c=V(()=>parseInt(e.length,10)),d=V(()=>parseInt(e.start,10)),b=V(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):r.value>=0?r.value:E(f.value,58));function E(a,n){const u=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-n*u)/n).toFixed(2)))}const X=V(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(b.value<=0)return[];if(b.value===1)return[l.value];if(c.value<=b.value)return B(c.value,d.value);const a=b.value%2===0,n=a?b.value/2:Math.floor(b.value/2),u=a?n:n+1,v=c.value-n;if(u-l.value>=0)return[...B(Math.max(1,b.value-1),d.value),e.ellipsis,c.value];if(l.value-v>=(a?1:0)){const g=b.value-1,S=c.value-g+d.value;return[d.value,e.ellipsis,...B(g,S)]}else{const g=Math.max(1,b.value-2),S=g===1?l.value:l.value-Math.ceil(g/2)+d.value;return[d.value,e.ellipsis,...B(g,S),e.ellipsis,c.value]}});function I(a,n,u){a.preventDefault(),l.value=n,u&&o(u,n)}const{refs:j,updateRef:H}=Re();q({VPaginationBtn:{color:p(e,"color"),border:p(e,"border"),density:p(e,"density"),size:p(e,"size"),variant:p(e,"variant"),rounded:p(e,"rounded"),elevation:p(e,"elevation")}});const J=V(()=>X.value.map((a,n)=>{const u=v=>H(v,n);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${n}`,page:a,props:{ref:u,ellipsis:!0,icon:!0,disabled:!0}};{const v=a===l.value;return{isActive:v,key:a,page:D(a),props:{ref:u,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:v?e.activeColor:e.color,"aria-current":v,"aria-label":y(v?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:g=>I(g,a)}}}})),_=V(()=>{const a=!!e.disabled||l.value<=d.value,n=!!e.disabled||l.value>=d.value+c.value-1;return{first:e.showFirstLastPage?{icon:k.value?e.lastIcon:e.firstIcon,onClick:u=>I(u,d.value,"first"),disabled:a,"aria-label":y(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:k.value?e.nextIcon:e.prevIcon,onClick:u=>I(u,l.value-1,"prev"),disabled:a,"aria-label":y(e.previousAriaLabel),"aria-disabled":a},next:{icon:k.value?e.prevIcon:e.nextIcon,onClick:u=>I(u,l.value+1,"next"),disabled:n,"aria-label":y(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:k.value?e.firstIcon:e.lastIcon,onClick:u=>I(u,d.value+c.value-1,"last"),disabled:n,"aria-label":y(e.lastAriaLabel),"aria-disabled":n}:void 0}});function z(){var n;const a=l.value-d.value;(n=j.value[a])==null||n.$el.focus()}function Q(a){a.key===G.left&&!e.disabled&&l.value>+e.start?(l.value=l.value-1,U(z)):a.key===G.right&&!e.disabled&&l.value<d.value+c.value-1&&(l.value=l.value+1,U(z))}return ye(()=>t(e.tag,{ref:O,class:["v-pagination",m.value,e.class],style:e.style,role:"navigation","aria-label":y(e.ariaLabel),onKeydown:Q,"data-test":"v-pagination-root"},{default:()=>[t("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&t("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[i.first?i.first(_.value.first):t(C,P({_as:"VPaginationBtn"},_.value.first),null)]),t("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[i.prev?i.prev(_.value.prev):t(C,P({_as:"VPaginationBtn"},_.value.prev),null)]),J.value.map((a,n)=>t("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[i.item?i.item(a):t(C,P({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),t("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[i.next?i.next(_.value.next):t(C,P({_as:"VPaginationBtn"},_.value.next),null)]),e.showFirstLastPage&&t("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[i.last?i.last(_.value.last):t(C,P({_as:"VPaginationBtn"},_.value.last),null)])])]})),{}}}),Fe={__name:"ListCard",props:{_id:{type:String,default:""},investigator_name:{type:String,default:""},occupation:{type:String,default:""},image:{type:String,default:""},version:{type:String,default:""},updatedAt:{type:String,default:""}},setup(e){const h=i=>i?new Date(i).toLocaleString():"";return(i,o)=>{const l=Ve("router-link");return x(),A(l,{to:"/charasheetsix/"+e._id,class:"card-link"},{default:s(()=>[t(Ce,{class:"list-item"},{default:s(()=>[t(W,null,{default:s(()=>[t(T,{class:"align-center"},{default:s(()=>[t(L,null,{default:s(()=>[t(M,{class:"text-truncate"},{default:s(()=>[w($(e.version),1)]),_:1})]),_:1}),t(L,{class:"text-right"},{default:s(()=>[e.updatedAt?(x(),A(M,{key:0,class:"text-truncate"},{default:s(()=>[w(" 最後更新："+$(h(e.updatedAt)),1)]),_:1})):he("",!0)]),_:1})]),_:1}),t(T,{class:"align-center"},{default:s(()=>[t(L,{cols:"1"},{default:s(()=>[t(pe,{size:"50"},{default:s(()=>[e.image?(x(),A(xe,{key:0,src:e.image},null,8,["src"])):(x(),A(Le,{key:1},{default:s(()=>o[0]||(o[0]=[w("mdi-account")])),_:1}))]),_:1})]),_:1}),t(L,{cols:"11"},{default:s(()=>[t(we,{class:"text-truncate"},{default:s(()=>[w($(e.investigator_name||"未設定"),1)]),_:1}),t(M,{class:"text-truncate"},{default:s(()=>[w($(e.occupation),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["to"])}}},De=_e(Fe,[["__scopeId","data-v-3c3ce831"]]),N=10,Me={__name:"charalist",setup(e){const{apiAuth:h}=Se(),i=F(1),o=F([]),l=F(""),y=V(()=>Math.ceil(o.value.length/N)),D=V(()=>{if(!o.value.length)return[];const m=l.value.toLowerCase();return o.value.filter(f=>{var r;return((r=f.investigator_name)==null?void 0:r.toLowerCase().includes(m))||f.investigator_name.includes(l.value)}).sort((f,r)=>new Date(r.updatedAt)-new Date(f.updatedAt)).slice((i.value-1)*N,i.value*N)}),k=async()=>{try{const{data:m}=await h.get("/charasheetsix");console.log("API 回應數據:",m),o.value=m.result}catch(m){console.log("API 請求錯誤:",m)}};return console.log("角色數據:",o.value),k(),(m,f)=>(x(),A(W,{width:"800px",fluid:""},{default:s(()=>[t(T,null,{default:s(()=>[t(L,{cols:"12"},{default:s(()=>[t(ke,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=r=>l.value=r),"prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1}),(x(!0),Pe(Ie,null,Ae(D.value,r=>(x(),A(L,{key:r._id,cols:"12"},{default:s(()=>[t(De,P({ref_for:!0},r),null,16)]),_:2},1024))),128)),t(L,{cols:"12"},{default:s(()=>[t($e,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=r=>i.value=r),length:y.value},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}};typeof K=="function"&&K(Me);export{Me as default};
