import{p as O,m as te,a as ae,g as W,u as $,c as o,b as ie,d as ce,e as de,f as ve,h as fe,t as G,i as me,j as ge,k as be,l as he,n as oe,s as C,o as V,q as xe,V as ye,r as F,v as z,w as ke,x as X,y as Se,z as U,A as Ve,B as le,C as Te,D as ne,E as we,F as pe,G as I,H as Ee,I as _e,J as Pe,K as Ce,L as Ie,M as Be,N as Ae,O as Y,P as He,Q as Le,R as Re,S as Ne,T as Z,U as J,W as De,X as Q,Y as Me,Z as j,_ as Ue,$ as Oe,a0 as ze,a1 as Ke,a2 as S,a3 as _,a4 as r,a5 as A,a6 as p,a7 as P,a8 as L,a9 as Fe,aa as K,ab as B,ac as R,ad as H,ae as q,af as We,ag as $e}from"./index-BIOJ7wy9.js";import{V as je}from"./VContainer-BzB05Dvr.js";import{V as N}from"./VList-B5loDerK.js";import{u as qe}from"./ssrBoot-CjyHcMWe.js";import{V as Ge}from"./VMain-DwXIG5S9.js";import{V as D}from"./VListItem-Cx-Nxtw0.js";import"./VDivider-B64AXrpT.js";const Xe=O({text:String,...te(),...ae()},"VToolbarTitle"),Ye=W()({name:"VToolbarTitle",props:Xe(),setup(e,k){let{slots:t}=k;return $(()=>{const i=!!(t.default||t.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var b;return[i&&o("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(b=t.default)==null?void 0:b.call(t)])]}})}),{}}}),Ze=[null,"prominent","default","comfortable","compact"],se=O({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ze.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ie(),...te(),...ce(),...de(),...ae({tag:"header"}),...ve()},"VToolbar"),ee=W()({name:"VToolbar",props:se(),setup(e,k){var v;let{slots:t}=k;const{backgroundColorClasses:i,backgroundColorStyles:b}=fe(G(e,"color")),{borderClasses:s}=me(e),{elevationClasses:x}=ge(e),{roundedClasses:h}=be(e),{themeClasses:d}=he(e),{rtlClasses:c}=oe(),u=C(!!(e.extended||(v=t.extension)!=null&&v.call(t))),y=V(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),n=V(()=>u.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return xe({VBtn:{variant:"text"}}),$(()=>{var f;const m=!!(e.title||t.title),w=!!(t.image||e.image),a=(f=t.extension)==null?void 0:f.call(t);return u.value=!!(e.extended||a),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,s.value,x.value,h.value,d.value,c.value,e.class],style:[b.value,e.style]},{default:()=>[w&&o("div",{key:"image",class:"v-toolbar__image"},[t.image?o(F,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(ye,{key:"image-img",cover:!0,src:e.image},null)]),o(F,{defaults:{VTabs:{height:z(y.value)}}},{default:()=>{var l,g,T;return[o("div",{class:"v-toolbar__content",style:{height:z(y.value)}},[t.prepend&&o("div",{class:"v-toolbar__prepend"},[(l=t.prepend)==null?void 0:l.call(t)]),m&&o(Ye,{key:"title",text:e.title},{text:t.title}),(g=t.default)==null?void 0:g.call(t),t.append&&o("div",{class:"v-toolbar__append"},[(T=t.append)==null?void 0:T.call(t)])])]}}),o(F,{defaults:{VTabs:{height:z(n.value)}}},{default:()=>[o(ke,null,{default:()=>[u.value&&o("div",{class:"v-toolbar__extension",style:{height:z(n.value)}},[a])]})]})]})}),{contentHeight:y,extensionHeight:n}}}),Je=O({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Qe(e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=k;let i=0,b=0;const s=X(null),x=C(0),h=C(0),d=C(0),c=C(!1),u=C(!1),y=V(()=>Number(e.scrollThreshold)),n=V(()=>Se((y.value-x.value)/y.value||0)),v=()=>{const m=s.value;if(!m||t&&!t.value)return;i=x.value,x.value="window"in m?m.pageYOffset:m.scrollTop;const w=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;if(b!==w){b=w;return}u.value=x.value<i,d.value=Math.abs(x.value-y.value)};return U(u,()=>{h.value=h.value||x.value}),U(c,()=>{h.value=0}),Ve(()=>{U(()=>e.scrollTarget,m=>{var a;const w=m?document.querySelector(m):window;w&&w!==s.value&&((a=s.value)==null||a.removeEventListener("scroll",v),s.value=w,s.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),le(()=>{var m;(m=s.value)==null||m.removeEventListener("scroll",v)}),t&&U(t,v,{immediate:!0}),{scrollThreshold:y,currentScroll:x,currentThreshold:d,isScrollActive:c,scrollRatio:n,isScrollingUp:u,savedScroll:h}}const et=O({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...se(),...Te(),...Je(),height:{type:[Number,String],default:64}},"VAppBar"),tt=W()({name:"VAppBar",props:et(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const i=X(),b=ne(e,"modelValue"),s=V(()=>{var g;const l=new Set(((g=e.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),x=V(()=>{const l=s.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!b.value}),{currentScroll:h,scrollThreshold:d,isScrollingUp:c,scrollRatio:u}=Qe(e,{canScroll:x}),y=V(()=>s.value.hide||s.value.fullyHide),n=V(()=>e.collapse||s.value.collapse&&(s.value.inverted?u.value>0:u.value===0)),v=V(()=>e.flat||s.value.fullyHide&&!b.value||s.value.elevate&&(s.value.inverted?h.value>0:h.value===0)),m=V(()=>s.value.fadeImage?s.value.inverted?1-u.value:u.value:void 0),w=V(()=>{var T,E;if(s.value.hide&&s.value.inverted)return 0;const l=((T=i.value)==null?void 0:T.contentHeight)??0,g=((E=i.value)==null?void 0:E.extensionHeight)??0;return y.value?h.value<d.value||s.value.fullyHide?l+g:l:l+g});we(V(()=>!!e.scrollBehavior),()=>{Ee(()=>{y.value?s.value.inverted?b.value=h.value>d.value:b.value=c.value||h.value<d.value:b.value=!0})});const{ssrBootStyles:a}=qe(),{layoutItemStyles:f}=pe({id:e.name,order:V(()=>parseInt(e.order,10)),position:G(e,"location"),layoutSize:w,elementSize:C(void 0),active:b,absolute:G(e,"absolute")});return $(()=>{const l=ee.filterProps(e);return o(ee,I({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...f.value,"--v-toolbar-image-opacity":m.value,height:void 0,...a.value},e.style]},l,{collapse:n.value,flat:v.value}),t)}),{}}}),at=O({id:String,submenu:Boolean,..._e(Pe({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ce}}),["absolute"])},"VMenu"),M=W()({name:"VMenu",props:at(),emits:{"update:modelValue":e=>!0},setup(e,k){let{slots:t}=k;const i=ne(e,"modelValue"),{scopeId:b}=Ie(),{isRtl:s}=oe(),x=Be(),h=V(()=>e.id||`v-menu-${x}`),d=X(),c=Ae(Y,null),u=C(new Set);He(Y,{register(){u.value.add(x)},unregister(){u.value.delete(x)},closeParents(a){setTimeout(()=>{var f;!u.value.size&&!e.persistent&&(a==null||(f=d.value)!=null&&f.contentEl&&!Le(a,d.value.contentEl))&&(i.value=!1,c==null||c.closeParents())},40)}}),le(()=>{c==null||c.unregister(),document.removeEventListener("focusin",y)}),Re(()=>i.value=!1);async function y(a){var g,T,E;const f=a.relatedTarget,l=a.target;await Ne(),i.value&&f!==l&&((g=d.value)!=null&&g.contentEl)&&((T=d.value)!=null&&T.globalTop)&&![document,d.value.contentEl].includes(l)&&!d.value.contentEl.contains(l)&&((E=Z(d.value.contentEl)[0])==null||E.focus())}U(i,a=>{a?(c==null||c.register(),Q&&document.addEventListener("focusin",y,{once:!0})):(c==null||c.unregister(),Q&&document.removeEventListener("focusin",y))},{immediate:!0});function n(a){c==null||c.closeParents(a)}function v(a){var f,l,g,T,E;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),Me(Z((f=d.value)==null?void 0:f.contentEl,!1),a.shiftKey?"prev":"next",ue=>ue.tabIndex>=0)||(i.value=!1,(g=(l=d.value)==null?void 0:l.activatorEl)==null||g.focus())}else e.submenu&&a.key===(s.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,(E=(T=d.value)==null?void 0:T.activatorEl)==null||E.focus())}function m(a){var l;if(e.disabled)return;const f=(l=d.value)==null?void 0:l.contentEl;f&&i.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),j(f,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),j(f,"prev")):e.submenu&&(a.key===(s.value?"ArrowRight":"ArrowLeft")?i.value=!1:a.key===(s.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),j(f,"first"))):(e.submenu?a.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(i.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>m(a))))}const w=V(()=>I({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":h.value,onKeydown:m},e.activatorProps));return $(()=>{const a=J.filterProps(e);return o(J,I({ref:d,id:h.value,class:["v-menu",e.class],style:e.style},a,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,absolute:!0,activatorProps:w.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":n,onKeydown:v},b),{activator:t.activator,default:function(){for(var f=arguments.length,l=new Array(f),g=0;g<f;g++)l[g]=arguments[g];return o(F,{root:"VMenu"},{default:()=>{var T;return[(T=t.default)==null?void 0:T.call(t,...l)]}})}})}),De({id:h,ΨopenChildren:u},d)}}),ct={__name:"default",setup(e){const k=Ue(),{apiAuth:t}=$e(),i=Oe(),b=ze(),s=[{text:"遊戲系統",to:"/rulebook#gamesystem",children:[{text:"桌上角色扮演遊戲",to:"/rulebook#r1-1"}]},{text:"導言",to:"/rulebook#introduction",children:[{text:"何謂克蘇魯神話",to:"/rulebook#r2-1"},{text:"何謂TRPG",to:"/rulebook#r2-2"},{text:"遊玩的目的",to:"/rulebook#r2-3"},{text:"守秘人",to:"/rulebook#r2-4"},{text:"玩家",to:"/rulebook#r2-5"},{text:"玩家之間的合作",to:"/rulebook#r2-6"},{text:"遊戲的背景世界",to:"/rulebook#r2-7"}]}],x=[{text:"能力値",to:"/aboutinvestigators#characteristics",children:[{text:"STR",to:"/aboutinvestigators#str"},{text:"CON",to:"/aboutinvestigators#con"},{text:"SIZ",to:"/aboutinvestigators#siz"},{text:"INT",to:"/aboutinvestigators#int"},{text:"POW",to:"/aboutinvestigators#pow"},{text:"DEX",to:"/aboutinvestigators#dex"},{text:"APP",to:"/aboutinvestigators#app-1"},{text:"EDU",to:"/aboutinvestigators#edu"},{text:"SAN",to:"/aboutinvestigators#san"}]},{text:"能力值檢定",to:"/aboutinvestigators#characteristicrolls",children:[{text:"〈靈感〉檢定",to:"/aboutinvestigators#idea"},{text:"〈幸運〉檢定",to:"/aboutinvestigators#luck"},{text:"〈知識〉檢定",to:"/aboutinvestigators#know"},{text:"傷害獎勵",to:"/aboutinvestigators#db"},{text:"耐久力",to:"/aboutinvestigators#hp"},{text:"魔力點數",to:"/aboutinvestigators#mp"}]},{text:"背景",to:"/aboutinvestigators#background",children:[{text:"調查員的性別",to:"/aboutinvestigators#sex"},{text:"姓名與年齡",to:"/aboutinvestigators#nameage"},{text:"出身地",to:"/aboutinvestigators#birthplace"},{text:"傷痕與精神障礙",to:"/aboutinvestigators#mentaldisorders"},{text:"肖像畫",to:"/aboutinvestigators#image"}]}],h=[{to:"/charalist",text:"角色列表"},{to:"/charasheetNew",text:"創建角色"},{to:"/schedule",text:"日程表"},{text:"登出"}],d=async()=>{try{await t.delete("/user/logout")}catch(c){console.log(c)}k.logout(),i({text:"登出成功",snackbarProps:{color:"green"}}),b.push("/")};return(c,u)=>{const y=Ke("router-view");return S(),_(P,null,[o(tt,null,{default:r(()=>[o(je,{fluid:"",class:"d-flex align-center"},{default:r(()=>[o(A,{to:"/",active:!1,class:"text-h5"},{default:r(()=>u[0]||(u[0]=[p("調查員之家")])),_:1}),o(M,{"open-on-hover":""},{activator:r(({props:n})=>[o(A,I({to:"/rulebook"},n),{default:r(()=>u[1]||(u[1]=[p("規則書")])),_:2},1040)]),default:r(()=>[o(N,null,{default:r(()=>[(S(),_(P,null,L(s,n=>(S(),_(P,{key:n.text},[n.children?(S(),B(M,{key:0,"open-on-hover":"",location:"end"},{activator:r(({props:v})=>[o(D,I({ref_for:!0},v,{to:n.to}),{default:r(()=>[p(H(n.text),1),o(q,{icon:"mdi-menu-right",size:"x-small"})]),_:2},1040,["to"])]),default:r(()=>[o(N,null,{default:r(()=>[(S(!0),_(P,null,L(n.children,v=>(S(),B(D,{key:v.text,to:v.to},{default:r(()=>[p(H(v.text),1)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1024)):R("",!0)],64))),64))]),_:1})]),_:1}),o(M,{"open-on-hover":""},{activator:r(({props:n})=>[o(A,I({to:"/aboutinvestigators"},n),{default:r(()=>u[2]||(u[2]=[p("關於調查員")])),_:2},1040)]),default:r(()=>[o(N,null,{default:r(()=>[(S(),_(P,null,L(x,n=>(S(),_(P,{key:n.text},[n.children?(S(),B(M,{key:0,"open-on-hover":"",location:"end"},{activator:r(({props:v})=>[o(D,I({ref_for:!0},v,{to:n.to}),{default:r(()=>[p(H(n.text),1),o(q,{icon:"mdi-menu-right",size:"x-small"})]),_:2},1040,["to"])]),default:r(()=>[o(N,null,{default:r(()=>[(S(!0),_(P,null,L(n.children,v=>(S(),B(D,{key:v.text,to:v.to},{default:r(()=>[p(H(v.text),1)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1024)):R("",!0)],64))),64))]),_:1})]),_:1}),o(Fe),K(k).isLoggedIn?R("",!0):(S(),B(A,{key:0,to:"/register",active:!1},{default:r(()=>u[3]||(u[3]=[p("註冊")])),_:1})),K(k).isLoggedIn?R("",!0):(S(),B(A,{key:1,to:"/login",active:!1},{default:r(()=>u[4]||(u[4]=[p("登入")])),_:1})),o(M,{"open-on-hover":""},{activator:r(({props:n})=>[K(k).isLoggedIn?(S(),B(A,We(I({key:0},n)),{default:r(()=>[p(H(K(k).account),1),o(q,{icon:"mdi-menu-down"})]),_:2},1040)):R("",!0)]),default:r(()=>[o(N,null,{default:r(()=>[(S(),_(P,null,L(h,n=>o(D,{key:n.value,to:n.to,onClick:v=>n.text==="登出"?d():null},{default:r(()=>[p(H(n.text),1)]),_:2},1032,["to","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),o(Ge,null,{default:r(()=>[o(y)]),_:1})],64)}}};export{ct as default};
