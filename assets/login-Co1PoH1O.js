import{ah as S,$ as B,_ as F,a3 as A,c as a,a4 as t,a5 as u,a7 as C,ag as M,a0 as N,a2 as U,a6 as m,aB as p,aa as s,ay as $,aw as g}from"./index-Da_Xni5f.js";import{c as j,a as f,u as q,d as v,V as z}from"./index.esm-DXMVjnsh.js";import{v as P}from"./index-C0K_Hgsv.js";import{b as V}from"./route-block-B_A1xBdJ.js";import{V as R}from"./VContainer-CkaEUmtT.js";import{V as T,a as D}from"./VRow-CXBEjNoM.js";import{V as E}from"./VDivider-D5aHU0Pi.js";const I={class:"text-center"},x={__name:"login",setup(G){const{api:b}=M(),d=B(),w=N(),y=F(),_=j({account:f().required("使用者帳號必填").min(4,"使用者帳號太短").max(20,"使用者帳號太長").test("isAlphanumeric","使用者帳號格式不符",l=>P.isAlphanumeric(l)),password:f().required("使用者密碼必填").min(4,"使用者密碼太短").max(20,"使用者密碼太長")}),{handleSubmit:h,isSubmitting:c}=q({validationSchema:_}),n=v("account"),i=v("password"),k=h(async l=>{var e,o;try{const{data:r}=await b.post("/user/login",{account:l.account,password:l.password});y.login(r.result),d({text:"登入成功",snackbarProps:{color:"green"}}),w.push("/")}catch(r){console.log(r),d({text:((o=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:o.message)||"發生未知錯誤",snackbarProps:{color:"red"}})}});return(l,e)=>(U(),A(C,null,[a(u,{to:"/",elevation:"0",variant:"text",size:"small",class:"home-btn"},{default:t(()=>e[2]||(e[2]=[m("回首頁")])),_:1}),a(R,{class:"d-flex justify-center align-center",style:{"min-height":"100vh"}},{default:t(()=>[a(T,{justify:"center",align:"center",class:"w-100"},{default:t(()=>[a(D,{cols:"12",sm:"8",md:"6",lg:"4"},{default:t(()=>[e[5]||(e[5]=p("h1",{class:"text-center",block:""},"登入",-1)),a(E),a(z,{disabled:s(c),onSubmit:$(s(k),["prevent"])},{default:t(()=>[a(g,{modelValue:s(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>s(n).value.value=o),"error-messages":s(n).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",variant:"outlined",counter:""},null,8,["modelValue","error-messages"]),a(g,{modelValue:s(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s(i).value.value=o),type:"password","error-messages":s(i).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",variant:"outlined",counter:""},null,8,["modelValue","error-messages"]),p("div",I,[a(u,{loading:s(c),type:"submit",color:"primary"},{default:t(()=>e[3]||(e[3]=[m("登入")])),_:1},8,["loading"]),a(u,{to:"/register",elevation:"0",variant:"text",size:"small"},{default:t(()=>e[4]||(e[4]=[m("還沒有帳號嗎？")])),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})],64))}};typeof V=="function"&&V(x);const X=S(x,[["__scopeId","data-v-a2e32a13"]]);export{X as default};
